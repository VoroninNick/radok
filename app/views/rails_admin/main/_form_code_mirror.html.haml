:ruby

  @scripts ||= []
  modes = field.assets[:mode]
  if !modes.respond_to?(:each)
    modes = [modes]
  end

  @scripts << field.js_location
  @scripts += modes
  locations = {mode: field.assets[:selected], theme: field.assets[:theme]}

  js_data = {
    csspath: field.css_location,
    #jspath: field.js_location,
    options: field.config,
    locations: locations #field.assets
  }

/= form.text_area field.method_name, field.html_attributes.reverse_merge(data: { richtext: 'codemirror', options: js_data.to_json }).reverse_merge({ value: field.form_value })
= form.text_area field.method_name, field.html_attributes.reverse_merge(data: { richtext: 'my_code_mirror', options: {}.to_json.to_json }).reverse_merge({ value: field.form_value })




